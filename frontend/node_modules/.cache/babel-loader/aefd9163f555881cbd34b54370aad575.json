{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createClassFeaturePlugin = createClassFeaturePlugin;\nObject.defineProperty(exports, \"injectInitialization\", {\n  enumerable: true,\n  get: function () {\n    return _misc.injectInitialization;\n  }\n});\nObject.defineProperty(exports, \"FEATURES\", {\n  enumerable: true,\n  get: function () {\n    return _features.FEATURES;\n  }\n});\n\nvar _core = require(\"@babel/core\");\n\nvar _helperFunctionName = _interopRequireDefault(require(\"@babel/helper-function-name\"));\n\nvar _helperSplitExportDeclaration = _interopRequireDefault(require(\"@babel/helper-split-export-declaration\"));\n\nvar _fields = require(\"./fields\");\n\nvar _decorators = require(\"./decorators\");\n\nvar _misc = require(\"./misc\");\n\nvar _features = require(\"./features\");\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst version = _package.default.version.split(\".\").reduce((v, x) => v * 1e5 + +x, 0);\n\nconst versionKey = \"@babel/plugin-class-features/version\";\n\nfunction createClassFeaturePlugin({\n  name,\n  feature,\n  loose,\n  manipulateOptions\n}) {\n  return {\n    name,\n    manipulateOptions,\n\n    pre() {\n      (0, _features.enableFeature)(this.file, feature, loose);\n\n      if (!this.file.get(versionKey) || this.file.get(versionKey) < version) {\n        this.file.set(versionKey, version);\n      }\n    },\n\n    visitor: {\n      Class(path, state) {\n        if (this.file.get(versionKey) !== version) return;\n        (0, _features.verifyUsedFeatures)(path, this.file);\n        const loose = (0, _features.isLoose)(this.file, feature);\n        let constructor;\n        let isDecorated = (0, _decorators.hasOwnDecorators)(path.node);\n        const props = [];\n        const elements = [];\n        const computedPaths = [];\n        const privateNames = new Set();\n        const body = path.get(\"body\");\n\n        for (const path of body.get(\"body\")) {\n          (0, _features.verifyUsedFeatures)(path, this.file);\n\n          if (path.node.computed) {\n            computedPaths.push(path);\n          }\n\n          if (path.isPrivate()) {\n            const {\n              name\n            } = path.node.key.id;\n            const getName = `get ${name}`;\n            const setName = `set ${name}`;\n\n            if (path.node.kind === \"get\") {\n              if (privateNames.has(getName) || privateNames.has(name) && !privateNames.has(setName)) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(getName).add(name);\n            } else if (path.node.kind === \"set\") {\n              if (privateNames.has(setName) || privateNames.has(name) && !privateNames.has(getName)) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(setName).add(name);\n            } else {\n              if (privateNames.has(name) && !privateNames.has(getName) && !privateNames.has(setName) || privateNames.has(name) && (privateNames.has(getName) || privateNames.has(setName))) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(name);\n            }\n          }\n\n          if (path.isClassMethod({\n            kind: \"constructor\"\n          })) {\n            constructor = path;\n          } else {\n            elements.push(path);\n\n            if (path.isProperty() || path.isPrivate()) {\n              props.push(path);\n            }\n          }\n\n          if (!isDecorated) isDecorated = (0, _decorators.hasOwnDecorators)(path.node);\n\n          if (path.isStaticBlock == null ? void 0 : path.isStaticBlock()) {\n            throw path.buildCodeFrameError(`Incorrect plugin order, \\`@babel/plugin-proposal-class-static-block\\` should be placed before class features plugins\n{\n  \"plugins\": [\n    \"@babel/plugin-proposal-class-static-block\",\n    \"@babel/plugin-proposal-private-property-in-object\",\n    \"@babel/plugin-proposal-private-methods\",\n    \"@babel/plugin-proposal-class-properties\",\n  ]\n}`);\n          }\n        }\n\n        if (!props.length && !isDecorated) return;\n        let ref;\n\n        if (path.isClassExpression() || !path.node.id) {\n          (0, _helperFunctionName.default)(path);\n          ref = path.scope.generateUidIdentifier(\"class\");\n        } else {\n          ref = _core.types.cloneNode(path.node.id);\n        }\n\n        const privateNamesMap = (0, _fields.buildPrivateNamesMap)(props);\n        const privateNamesNodes = (0, _fields.buildPrivateNamesNodes)(privateNamesMap, loose, state);\n        (0, _fields.transformPrivateNamesUsage)(ref, path, privateNamesMap, loose, state);\n        let keysNodes, staticNodes, instanceNodes, wrapClass;\n\n        if (isDecorated) {\n          staticNodes = keysNodes = [];\n          ({\n            instanceNodes,\n            wrapClass\n          } = (0, _decorators.buildDecoratedClass)(ref, path, elements, this.file));\n        } else {\n          keysNodes = (0, _misc.extractComputedKeys)(ref, path, computedPaths, this.file);\n          ({\n            staticNodes,\n            instanceNodes,\n            wrapClass\n          } = (0, _fields.buildFieldsInitNodes)(ref, path.node.superClass, props, privateNamesMap, state, loose));\n        }\n\n        if (instanceNodes.length > 0) {\n          (0, _misc.injectInitialization)(path, constructor, instanceNodes, (referenceVisitor, state) => {\n            if (isDecorated) return;\n\n            for (const prop of props) {\n              if (prop.node.static) continue;\n              prop.traverse(referenceVisitor, state);\n            }\n          });\n        }\n\n        path = wrapClass(path);\n        path.insertBefore([...privateNamesNodes, ...keysNodes]);\n        path.insertAfter(staticNodes);\n      },\n\n      PrivateName(path) {\n        if (this.file.get(versionKey) !== version || path.parentPath.isPrivate({\n          key: path.node\n        })) {\n          return;\n        }\n\n        throw path.buildCodeFrameError(`Unknown PrivateName \"${path}\"`);\n      },\n\n      ExportDefaultDeclaration(path) {\n        if (this.file.get(versionKey) !== version) return;\n        const decl = path.get(\"declaration\");\n\n        if (decl.isClassDeclaration() && (0, _decorators.hasDecorators)(decl.node)) {\n          if (decl.node.id) {\n            (0, _helperSplitExportDeclaration.default)(path);\n          } else {\n            decl.node.type = \"ClassExpression\";\n          }\n        }\n      }\n\n    }\n  };\n}","map":{"version":3,"sources":["/Users/Jake.Squier/blockBots/frontend/node_modules/@babel/helper-create-class-features-plugin/lib/index.js"],"names":["Object","defineProperty","exports","value","createClassFeaturePlugin","enumerable","get","_misc","injectInitialization","_features","FEATURES","_core","require","_helperFunctionName","_interopRequireDefault","_helperSplitExportDeclaration","_fields","_decorators","_package","obj","__esModule","default","version","split","reduce","v","x","versionKey","name","feature","loose","manipulateOptions","pre","enableFeature","file","set","visitor","Class","path","state","verifyUsedFeatures","isLoose","constructor","isDecorated","hasOwnDecorators","node","props","elements","computedPaths","privateNames","Set","body","computed","push","isPrivate","key","id","getName","setName","kind","has","buildCodeFrameError","add","isClassMethod","isProperty","isStaticBlock","length","ref","isClassExpression","scope","generateUidIdentifier","types","cloneNode","privateNamesMap","buildPrivateNamesMap","privateNamesNodes","buildPrivateNamesNodes","transformPrivateNamesUsage","keysNodes","staticNodes","instanceNodes","wrapClass","buildDecoratedClass","extractComputedKeys","buildFieldsInitNodes","superClass","referenceVisitor","prop","static","traverse","insertBefore","insertAfter","PrivateName","parentPath","ExportDefaultDeclaration","decl","isClassDeclaration","hasDecorators","type"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createClassFeaturePlugin = createClassFeaturePlugin;\nObject.defineProperty(exports, \"injectInitialization\", {\n  enumerable: true,\n  get: function () {\n    return _misc.injectInitialization;\n  }\n});\nObject.defineProperty(exports, \"FEATURES\", {\n  enumerable: true,\n  get: function () {\n    return _features.FEATURES;\n  }\n});\n\nvar _core = require(\"@babel/core\");\n\nvar _helperFunctionName = _interopRequireDefault(require(\"@babel/helper-function-name\"));\n\nvar _helperSplitExportDeclaration = _interopRequireDefault(require(\"@babel/helper-split-export-declaration\"));\n\nvar _fields = require(\"./fields\");\n\nvar _decorators = require(\"./decorators\");\n\nvar _misc = require(\"./misc\");\n\nvar _features = require(\"./features\");\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst version = _package.default.version.split(\".\").reduce((v, x) => v * 1e5 + +x, 0);\n\nconst versionKey = \"@babel/plugin-class-features/version\";\n\nfunction createClassFeaturePlugin({\n  name,\n  feature,\n  loose,\n  manipulateOptions\n}) {\n  return {\n    name,\n    manipulateOptions,\n\n    pre() {\n      (0, _features.enableFeature)(this.file, feature, loose);\n\n      if (!this.file.get(versionKey) || this.file.get(versionKey) < version) {\n        this.file.set(versionKey, version);\n      }\n    },\n\n    visitor: {\n      Class(path, state) {\n        if (this.file.get(versionKey) !== version) return;\n        (0, _features.verifyUsedFeatures)(path, this.file);\n        const loose = (0, _features.isLoose)(this.file, feature);\n        let constructor;\n        let isDecorated = (0, _decorators.hasOwnDecorators)(path.node);\n        const props = [];\n        const elements = [];\n        const computedPaths = [];\n        const privateNames = new Set();\n        const body = path.get(\"body\");\n\n        for (const path of body.get(\"body\")) {\n          (0, _features.verifyUsedFeatures)(path, this.file);\n\n          if (path.node.computed) {\n            computedPaths.push(path);\n          }\n\n          if (path.isPrivate()) {\n            const {\n              name\n            } = path.node.key.id;\n            const getName = `get ${name}`;\n            const setName = `set ${name}`;\n\n            if (path.node.kind === \"get\") {\n              if (privateNames.has(getName) || privateNames.has(name) && !privateNames.has(setName)) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(getName).add(name);\n            } else if (path.node.kind === \"set\") {\n              if (privateNames.has(setName) || privateNames.has(name) && !privateNames.has(getName)) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(setName).add(name);\n            } else {\n              if (privateNames.has(name) && !privateNames.has(getName) && !privateNames.has(setName) || privateNames.has(name) && (privateNames.has(getName) || privateNames.has(setName))) {\n                throw path.buildCodeFrameError(\"Duplicate private field\");\n              }\n\n              privateNames.add(name);\n            }\n          }\n\n          if (path.isClassMethod({\n            kind: \"constructor\"\n          })) {\n            constructor = path;\n          } else {\n            elements.push(path);\n\n            if (path.isProperty() || path.isPrivate()) {\n              props.push(path);\n            }\n          }\n\n          if (!isDecorated) isDecorated = (0, _decorators.hasOwnDecorators)(path.node);\n\n          if (path.isStaticBlock == null ? void 0 : path.isStaticBlock()) {\n            throw path.buildCodeFrameError(`Incorrect plugin order, \\`@babel/plugin-proposal-class-static-block\\` should be placed before class features plugins\n{\n  \"plugins\": [\n    \"@babel/plugin-proposal-class-static-block\",\n    \"@babel/plugin-proposal-private-property-in-object\",\n    \"@babel/plugin-proposal-private-methods\",\n    \"@babel/plugin-proposal-class-properties\",\n  ]\n}`);\n          }\n        }\n\n        if (!props.length && !isDecorated) return;\n        let ref;\n\n        if (path.isClassExpression() || !path.node.id) {\n          (0, _helperFunctionName.default)(path);\n          ref = path.scope.generateUidIdentifier(\"class\");\n        } else {\n          ref = _core.types.cloneNode(path.node.id);\n        }\n\n        const privateNamesMap = (0, _fields.buildPrivateNamesMap)(props);\n        const privateNamesNodes = (0, _fields.buildPrivateNamesNodes)(privateNamesMap, loose, state);\n        (0, _fields.transformPrivateNamesUsage)(ref, path, privateNamesMap, loose, state);\n        let keysNodes, staticNodes, instanceNodes, wrapClass;\n\n        if (isDecorated) {\n          staticNodes = keysNodes = [];\n          ({\n            instanceNodes,\n            wrapClass\n          } = (0, _decorators.buildDecoratedClass)(ref, path, elements, this.file));\n        } else {\n          keysNodes = (0, _misc.extractComputedKeys)(ref, path, computedPaths, this.file);\n          ({\n            staticNodes,\n            instanceNodes,\n            wrapClass\n          } = (0, _fields.buildFieldsInitNodes)(ref, path.node.superClass, props, privateNamesMap, state, loose));\n        }\n\n        if (instanceNodes.length > 0) {\n          (0, _misc.injectInitialization)(path, constructor, instanceNodes, (referenceVisitor, state) => {\n            if (isDecorated) return;\n\n            for (const prop of props) {\n              if (prop.node.static) continue;\n              prop.traverse(referenceVisitor, state);\n            }\n          });\n        }\n\n        path = wrapClass(path);\n        path.insertBefore([...privateNamesNodes, ...keysNodes]);\n        path.insertAfter(staticNodes);\n      },\n\n      PrivateName(path) {\n        if (this.file.get(versionKey) !== version || path.parentPath.isPrivate({\n          key: path.node\n        })) {\n          return;\n        }\n\n        throw path.buildCodeFrameError(`Unknown PrivateName \"${path}\"`);\n      },\n\n      ExportDefaultDeclaration(path) {\n        if (this.file.get(versionKey) !== version) return;\n        const decl = path.get(\"declaration\");\n\n        if (decl.isClassDeclaration() && (0, _decorators.hasDecorators)(decl.node)) {\n          if (decl.node.id) {\n            (0, _helperSplitExportDeclaration.default)(path);\n          } else {\n            decl.node.type = \"ClassExpression\";\n          }\n        }\n      }\n\n    }\n  };\n}"]},"metadata":{},"sourceType":"script"}